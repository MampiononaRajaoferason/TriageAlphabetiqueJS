<!DOCTYPE html>

<style>
    table,
    th,
    td {
        border: 1px solid black;
    }

    button:hover {
        background: #34495e;
        color: orange;
    }
</style>


<body>
    <h2>Sorting Array of objects with JavaScript</h2>

    <div>

        <form>
            Choice
            <select id="mySelect">
              <!--
              onchange="myFunction()"
              -->
                <option value = "default" onclick="default_function()">default</option>
                //onchange="default_function()"
                <option value = "asc" id="A-Z" onclick="ascending()">A-Z</option>
                <option value = "desc" id="Z-A" onclick="descending()">Z-A</option>
            </select>
        </form>
        <table style="text-align: center; margin: 0 auto; width: 50%">
            <thead>
                <th>Id</th>
                <th>First Name</th>
                <th>Last Name</th>

            </thead>
            <tbody id="table">
                <tbody>

        </table>


        <p id="demo"></p>
    </div>

    <div class="user_details">
      <form class="user_entry">
        <label for="firstName">First Name</label>
      </br>
        <input id = 'firstName' type="text" name="Name" value=""  placeholder="firstname">
      </br>
        <label for="lastName">Last Name</label>
      </br>
        <input id="lastName" type="text" name="lastName" value="" placeholder="lastname">

      </br>
        <button id='submit' type="submit" name="button" onclick="submit_push()">Submit</button>

      </form>

    </div>

    <script>
        let myArr = [{
                "lastName": "Andryii",
                "firstName": "Shevchenko"
            },

            {
                "lastName": "Zansens",
                "firstName": "Dark"
            }, {
                "lastName": "Zaed",
                "firstName": "York"
            }, {
                "lastName": "Calivu",
                "firstName": "Dreso"
            }, {
                "lastName": "Harmer",
                "firstName": "Garrt"
            }, {
                "lastName": "Jack",
                "firstName": "Sparrow"
            }, {
                "lastName": "Spark",
                "firstName": "Mikel"
            }, {
                "lastName": "Arteta",
                "firstName": "Franck"
            }, {
                "lastName": "Zendana",
                "firstName": "Zoro"
            }

        ]
        var default_data = [...myArr]
        //--- creating a table


      function create_table(arr) {
          var tableBody = document.getElementById('table');
          //var x = document.getElementById("mySelect").value;
          var res = arr;

          var len = res.length;

          for (let i = 0; i < len; i++) {
              res[i].id = i + 1;
          }

          text = "<tr>";

          for (let i = 0; i < len; i++) {

              text += "<td>" + res[i].id + "</td>";

              text += "<td>" + res[i].firstName + "</td>";

              text += "<td>" + res[i].lastName + "</td>";


              text += "</tr>";

          }

          //alert(text)
          document.getElementById('table').innerHTML = text;

        }

        /*---------------------------------------------------*/


        function sorting_ascendingly_on(arr, prop) {

            let res = arr.sort(function(a, b) {

                let property = prop;
                return a[property] === b[property] ? 0 : a[property] > b[property] ? 1 : -1
            })
            return res
        }


        function sorting_descendingly_on(arr, prop) {

            let res = arr.sort(function(a, b) {

                let property = prop;
                return a[property] === b[property] ? 0 : a[property] > b[property] ? -1 : 1
            })
            return res
        }

        function default_function(){
          create_table(default_data);
        }

        function ascending(){
          create_table(sorting_ascendingly_on(myArr, 'lastName'));
        }

        function descending(){
          create_table(sorting_descendingly_on(myArr, 'lastName'));
        }


        default_function();

        //Add fields to the initial data

        function store_input(){
          var fname = document.getElementById('firstName').value;
          var lname = document.getElementById('lastName').value;
          var update = [...myArr];

          update.lastName = lname;
          update.firstName = fname;

          default_data.push({firstName: update.firstName, lastName: update.lastName});
          return default_data;
        }

        function submit_push(){
          var output = store_input()
          create_table(output);
        }




    </script>

</body>


function add_fields(){
  //target the table body we want to modify
  var tableBody = document.getElementById('table');

  /*
  //create an empty row <tr> at the end of the table
  var row = tableBody.insertRow(1);
  // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
  var cell1 = row.insertCell(0);
  var cell2 = row.insertCell(1);
  var cell3 = row.insertCell(2);
  // Add some text to the new cells:
  cell1.innerHTML = "n_id";
  cell2.innerHTML = "firstName";
  cell3.innerHTML = "lastName"
  */
  text = "<tr>";

  for (let i = 0; i < 3; i++) {

      text += "<td>" + myArr.length + "</td>";

      text += "<td>" + res[i].firstName + "</td>";

      text += "<td>" + res[i].lastName + "</td>";


      text += "</tr>";

  }


  document.getElementById('table').innerHTML = text;

}
